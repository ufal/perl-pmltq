<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>PML-TQ - Query Engine and Query Language for TreeBanks</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="author" content="Petr Pajas" />
    <meta name="keywords" content="treebank search query tree constituency dependency" />
    <link href="blue.css" rel="stylesheet" />
  </head>
  <body style="background: white; padding:0pt; margin:0pt;">
    <img src="pmltq.png" alt="PML-TQ - Tool for Querying Treebanks"/>
    <!-- <h1 style="font-size: 20pt">PML-TQ - Tool for Querying Treebanks</h1> -->
    <div style="margin: 2% 3%;">
    <p>
      This distribution contains an SQL-database-driven implementation
      of a PML-TQ system for querying linguistically annotated
      treebanks.
    </p>

    <div class="framed" style="display: table-cell;">
      <p>
      <b>Note:</b>
      </p>
      <ul>
      <li><p>
      If you only want to search over a small
      amount of PML files on your computer,
      you can use a Perl-driven client-side PML-TQ search engine,
      that is part of the <b>pmltq</b>
      extension to <a href="http://ufal.mff.cuni.cz/~pajas/tred">TrEd</a>
      (see section Client below).
      The client-side engine is slower than
      the SQL based version available on this page,
      but does not require any installation, configuration,
      or data conversion.</p>
      </li>
      <li><p>We are also hosting a PML-TQ server
      with several treebanks
      including <a href="http://ufal.mff.cuni.cz/pdt/">PDT 2.0</a>,
      <a href="http://www.cis.upenn.edu/~treebank/">Penn Treebank 3</a>,
      <a href="http://www.ims.uni-stuttgart.de/projekte/TIGER/TIGERCorpus/">Tiger Corpus</a>,
      and several dependency treebanks from the CoNLL 2009 Shared Task (for CoNLL 2009 ST participants only).
      Our PML-TQ server can be accessed using a graphical client
      interface (<a href="http://ufal.mff.cuni.cz/~pajas/tred">TrEd</a>
      and the <b>pmltq</b> extension, see the section Client below).
      </p>
      <p>Querying using our server <b>requires registration</b>, which you
      can obtain free of charge by sending
      <a href="mailto:pajas@ufal.mff.cuni.cz">me</a>
      an e-mail. Note: for some treebanks, you will need to have
      a license from the treebank distributor.
      </p>
      </li>
      </ul>
    </div>
    <p>PML-TQ query engine has a client server architecture
      (HTTP client + tiny HTTP server + CGI + SQL database backend) 
      and provides graphical, command-line, and simple web-based interfaces.
    </p>
    <div>
    <a href="pmltq_tred.png"><img hspace="5pt" vspace="5pt" src="pmltq_tred_small.png" class="right" alt="screenshot" /></a>
    <h4>Client</h4>
    <p>
      A graphical client interface for PML-TQ is part of the tree
      editor <a href="http://ufal.mff.cuni.cz/pajas/~tred">TrEd</a>
      (a GPL-licensed software available separatelly)
      as
      an extension called <b>pmltq</b>.
      To install this extension,
      start TrEd, select Session -> Manage Extensions -> Get New Extensions,
      and select 'pmltq'. When done, press <tt>Shift+F3</tt>
      to start the search.
      Select 'Treebank (server)' for searching using a PML-TQ
      server over a full treebank, or 'Files (local)' for Perl-driven client-side search
      over some local files. 
    </p>
    <p>A simple text-based client is included in the package below.</p>
</div>
<div>
    <h4>Server</h4>
    <p>You only need to install the server
       if you want to use PML-TQ for fast querying over a mid-to-large-sized treebank
       of your own. For individual files or small treebanks, up to say 10K trees (your mileage may vary),
       the Perl-based query engine built into the TrEd and the command-line client
       should be sufficient.
       You can also register for querying treebanks hosted on our PML-TQ servers - see above).
    </p>
    <p>
      Running a PML-TQ server requires either Oracle or PostgresSQL
      database, Perl >= 5.8.8 (plus several Perl modules installable from CPAN),
      and a treebank encoded in (or convertible to)
      the <a href="http://ufal.mff.cuni.cz/jazz/PML/index_en.html">PML format</a>.
    </p>
    <p>
      The server has been tested on Linux
      with <a href="http://www.oracle.com/technology/software/products/database/index.html">Oracle XE 10g</a> and <a href="http://www.postgresql.org/">PostgresSQL (8.4beta)</a>.
    </p>
</div>
    <h4>Version</h4>
    <p>Current version is 0.7.2 (alpha)</p>
    <p>This realease is ready for testing, but some important parts of the documentation
    are still missing.</p>
    <h4>Download</h4>
    <p><a href="pmltq-0.7.2.tar.gz">pmltq.tar.gz</a> - PML-TQ distribution package</p>

    <h4>Documentation</h4>
    <ul>
	<li><a href="doc/pmltq_doc.html">PML-TQ Manual and Query Language Reference</a> (incomplete)</li>
    </ul>

    <h4>License</h4>
    <p>This software is published under 
    <a href="http://www.gnu.org/copyleft/gpl.html">GPL (General Public License)</a>.
    </p>
    <h4>Directory structure</h4>
    <pre class="literallayout">
      Subdirectories:
	config    - sample configuration files (must edit first!)
	contrib   - sample conversion scripts (e.g. for PDT 2.0)
	doc       - documentation
	libs      - perl modules used by pmltq
	resources - PML schemas used by pmltq
	sql       - SQL scripts to init the database
      Scripts:
	install_deps.sh - install modules required by the search server
	pmltq_http  - small HTTP server providing PML-TQ services
	pml2base.pl - PML to SQL database conversion script
	pmltq	    - command-line client for both dabase and Perl-driven query engine</pre>
    <h4>Quick start</h4>
    <dl>
      <dt>Install an SQL database server.</dt>
      <dd>Supported are Oracle XE and PostgreSQL,
      but complete aggregation functionality is only supported for
      Oracle XE and PostgreSQL 8.4 (currently available as developement snapshot). 
     Also, some queries may be much slower on PostgreSQL.</dd>
      <dt>Init the database:</dt>
      <dd>For Oracle:
      <pre class="literallayout">
	echo quit | sqlplus @ sql/init_oracle.sql
      	echo quit | sqlplus @ sql/pml2base_init.sql</pre>
      For PostgreSQL:
      <pre class="literallayout">
	psql -F sql/init_postgres.sql
      	psql -F sql/pml2base_init-pg.sql</pre>
      </dd>
      <dt>Load data into the database</dt>
      <dd>Use <tt>pml2base.pl</tt> or <tt>contrib/pml2base.btred</tt>
        (see example usage for 
	<a href="http://ufal.mff.cuni.cz/pdt2.0">PDT 2.0</a> in <tt>contrib/pdt2base.sh</tt>).
      </dd>
      <dt>Configure PML-TQ</dt>
      <dd>Copy <tt>config/pmltq_cgi.conf.sample</tt> to <tt>config/pmltq_cgi.conf</tt>
      and edit the file (specify SQL server name, port, driver - Oracle or Pg, paths to original treebank data, etc.)
      </dd>
      <dt>Start the server</dt>
      <dd>
      <pre class="literallayout">
      	./pmltq_http</pre>
	(see <tt>pmltq_http --help</tt> for more options).
      </dd>
      <dt>Test some queries</dt>
      <dd>
	<ul>
	  <li>open <tt>http://localhost:8082/query</tt> in your browser, or</li>
	  <li>use <tt>./pmltq</tt> client, or</li>
	  <li>TrEd, press Shift+F3, configure HTTP using
	  <tt>http://localhost:8082</tt> as URL, create a query and
	  press Space</li>
	</ul>
	<p>
	  Of course, if the client runs on a different computer than
	  the <tt>pmltq_http</tt> server, replace <tt>localhost</tt> with hostname or
	  IP of the server running <tt>pmltq_http</tt>.
	</p>
      </dd>
    </dl>
    <h4>Copyright</h4>
    <p>Copyright (c) 2008-2009 by Petr Pajas and Jan Štěpánek</p>
    <h4>Acknowledgement</h4>
    <p>The development of PML-TQ is a part of the project <a href="http://ufal.mff.cuni.cz/jazz/">"Integration of language resources for information extraction from natural texts"</a>, Information Society of Grant Agency of Academy of Sciences of the Czech Republic: 1ET101120503</p>
</div>
  </body>
</html>
